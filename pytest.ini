# pytest Configuration for Research Project
# ==========================================
# 研究プロジェクトの pytest 設定ファイル
#
# Usage:
#   pytest                          # Run all tests
#   pytest -v                       # Verbose output
#   pytest --cov                    # With coverage
#   pytest -m "not slow"            # Skip slow tests
#   pytest -m "unit"                # Run only unit tests
#   pytest -k "japan"               # Run tests matching "japan"

[pytest]
# ====================
# Test Discovery
# ====================
testpaths =
    skills/user/corporate-research-data-hub/tests
    skills/user/strategic-management-research-hub/tests
    skills/user/us-corporate-analytics/tests
    skills/user/scientific-databases/tests
    skills/user/strategic-research-suite

python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# ====================
# Output & Display
# ====================
addopts =
    -v
    --tb=short
    --strict-markers
    -ra
    --color=yes

# ====================
# Markers
# ====================
markers =
    unit: Unit tests (fast, no external dependencies)
    integration: Integration tests (may require API access)
    slow: Slow tests (data processing, large datasets)
    api: Tests that call external APIs
    database: Tests that interact with databases
    japan: Tests for Japanese data sources (EDINET, TDnet)
    korea: Tests for Korean data sources (OpenDART)
    china: Tests for Chinese data sources (Tushare)
    us: Tests for US data sources (SEC EDGAR, World Bank)

# ====================
# Coverage Settings
# ====================
# Run with: pytest --cov
# Or use: pytest --cov=skills --cov-report=html

# ====================
# Filtering
# ====================
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::FutureWarning

# ====================
# Timeout (requires pytest-timeout)
# ====================
# timeout = 300

# ====================
# Parallel Execution (requires pytest-xdist)
# ====================
# Run with: pytest -n auto

# ====================
# Logging
# ====================
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# ====================
# Miscellaneous
# ====================
norecursedirs =
    .git
    .github
    __pycache__
    *.egg-info
    .eggs
    dist
    build
    node_modules
    *_env
    research_env
    venv
    .venv
